{"version":3,"sources":["main.js"],"names":[],"mappings":";;AAAA;;AAEA,EAAE,YAAW;AACX,MAAI,kBAAkB,SAAS,cAAT,CAAwB,iBAAxB,CAAlB,CADO;;AAGX,kBAAgB,gBAAhB,CAAiC,WAAjC,EAA8C,SAA9C,EAAyD,KAAzD,EAHW;AAIX,kBAAgB,gBAAhB,CAAiC,UAAjC,EAA6C,QAA7C,EAAuD,KAAvD,EAJW;AAKX,kBAAgB,gBAAhB,CAAiC,MAAjC,EAAyC,IAAzC,EAA+C,KAA/C,EALW;;AAOX,WAAS,SAAT,CAAmB,CAAnB,EAAsB;AACpB,MAAE,eAAF,GADoB;AAEpB,MAAE,cAAF,GAFoB;GAAtB;;AAKA,WAAS,QAAT,CAAkB,CAAlB,EAAqB;AACnB,MAAE,eAAF,GADmB;AAEnB,MAAE,cAAF,GAFmB;GAArB;;AAKA,WAAS,IAAT,CAAc,CAAd,EAAiB;AACf,MAAE,eAAF,GADe;AAEf,MAAE,cAAF,GAFe;AAGf,QAAI,KAAK,EAAE,YAAF,CAHM;AAIf,QAAI,QAAQ,GAAG,KAAH,CAJG;AAKf,QAAG,MAAM,MAAN,EAAc;;;;;;;;AAQf,iBAAW,MAAM,CAAN,CAAX,EARe;KAAjB;GALF;;AAiBA,WAAS,UAAT,CAAoB,IAApB,EAAyB;AACvB,QAAI,KAAK,IAAI,QAAJ,EAAL,CADmB;AAEvB,QAAI,WAAW,IAAI,QAAJ,CAAa,gBAAb,CAAX,CAFmB;;AAIvB,OAAG,MAAH,CAAU,QAAV,EAAmB,IAAnB,EAJuB;;AAMvB,QAAI,MAAM,IAAI,cAAJ,EAAN,CANmB;AAOvB,QAAI,kBAAJ,GAAyB,YAAU;AACjC,UAAG,IAAI,UAAJ,IAAgB,CAAhB,IAAqB,IAAI,MAAJ,IAAY,GAAZ,EAAgB;AACtC,cAAM,IAAI,YAAJ,CAAN,CADsC;OAAxC;KADuB;;;AAPF,OAcvB,CAAI,MAAJ,CAAW,UAAX,GAAwB,UAAS,GAAT,EAAa;;;;;;;AAOnC,UAAI,SAAS,IAAI,MAAJ,CAPsB;AAQnC,UAAI,MAAM,IAAI,KAAJ,CARyB;AASnC,UAAI,MAAM,KAAK,KAAL,CAAW,MAAI,MAAJ,GAAW,GAAX,CAAjB;;AAT+B,cAWnC,CAAS,MAAT,CAAgB,GAAhB,EAXmC;KAAb,CAdD;;AA4BvB,QAAI,IAAJ,CAAS,MAAT,EAAgB,UAAhB,EA5BuB;AA6BvB,QAAI,IAAJ,CAAS,EAAT,EA7BuB;GAAzB;CAlCA,CAAF","file":"main.js","sourcesContent":["import './Progress.js';\n\n$(function() {\n  var uploadContainer = document.getElementById('uploadContainer');\n\n  uploadContainer.addEventListener(\"dragenter\", dragenter, false);\n  uploadContainer.addEventListener(\"dragover\", dragover, false);\n  uploadContainer.addEventListener(\"drop\", drop, false);\n\n  function dragenter(e) {\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  function dragover(e) {\n    e.stopPropagation();\n    e.preventDefault();\n  }\n\n  function drop(e) {\n    e.stopPropagation();\n    e.preventDefault();\n    var dt = e.dataTransfer;\n    var files = dt.files;\n    if(files.length) {\n      //var file = files[0];\n      //var reader = new FileReader();\n      //reader.onload = function() {\n      //    document.getElementById(\"filecontent\").innerHTML = this.result;\n      //};\n      //reader.readAsText(file);\n\n      ajaxUpload(files[0]);\n    }\n  }\n\n  function ajaxUpload(file){\n    var fd = new FormData();\n    var progress = new Progress('uploadProgress');\n\n    fd.append(\"myhead\",file);\n\n    var xhr = new XMLHttpRequest();\n    xhr.onreadystatechange = function(){\n      if(xhr.readyState==4 && xhr.status==200){\n        alert(xhr.responseText);\n      }\n    };\n\n    //侦查当前附件上传情况\n    xhr.upload.onprogress = function(evt){\n      //侦查附件上传情况\n      //通过事件对象侦查\n      //该匿名函数表达式大概0.05-0.1秒执行一次\n      //console.log(evt);\n      //console.log(evt.loaded);  //已经上传大小情况\n      //evt.total; 附件总大小\n      var loaded = evt.loaded;\n      var tot = evt.total;\n      var per = Math.floor(100*loaded/tot);  //已经上传的百分比\n\n      progress.update(per);\n    };\n\n    xhr.open(\"post\",\"./upload\");\n    xhr.send(fd);\n  }\n});\n"],"sourceRoot":"/source/"}